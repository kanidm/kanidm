
[profile.release]
debug = true
lto = "thin"

[workspace]
members = [
    "kanidm_client",
    "kanidm_proto",
    "kanidm_tools",
    "kanidm_unix_int",
    "kanidm_unix_int/nss_kanidm",
    "kanidm_unix_int/pam_kanidm",
    "kanidmd_web_ui",
    "kanidmd/daemon",
    "kanidmd/idm",
    "kanidmd/score",
    "orca",
    "profiles",
    "sketching",
]

exclude = [
    "kanidm_unix_int/pam_tester"
]


[workspace.dependencies]
# compact_jwt = { path = "../compact_jwt" }
# concread = { path = "../concread" }
# idlset = { path = "../idlset" }
# ldap3_server = { path = "../ldap3_server" }


webauthn-authenticator-rs = "0.4.7"
webauthn-rs = "0.4.7"
webauthn-rs-core = "0.4.7"
webauthn-rs-proto = "0.4.7"
# webauthn-authenticator-rs = { path = "../webauthn-rs/webauthn-authenticator-rs" }
# webauthn-rs = { path = "../webauthn-rs/webauthn-rs" }
# webauthn-rs-core = { path = "../webauthn-rs/webauthn-rs-core" }
# webauthn-rs-proto = { path = "../webauthn-rs/webauthn-rs-proto" }

# enshrinken the WASMs
[profile.release.package.kanidmd_web_ui]
# optimization over all codebase ( better optimization, slower build )
codegen-units = 1
# optimization for size ( more aggressive )
opt-level = 'z'
# link time optimization using using whole-program analysis
# lto = true
